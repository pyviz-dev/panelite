{"version":3,"file":"7889.37e6c64.js","mappings":"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","sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@bokeh/jupyter_bokeh/lib/manager.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@bokeh/jupyter_bokeh/lib/renderer.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@bokeh/jupyter_bokeh/lib/widgets.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@bokeh/jupyter_bokeh/lib/plugin.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@bokeh/jupyter_bokeh/lib/index.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@bokeh/jupyter_bokeh/lib/metadata.js"],"sourcesContent":["export class ContextManager {\n    constructor(context) {\n        this._context = context;\n    }\n    get context() {\n        if (this._context != null) {\n            return this._context;\n        }\n        else {\n            throw new Error('context was already disposed');\n        }\n    }\n    get isDisposed() {\n        return this._context == null;\n    }\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        this._context = null;\n    }\n}\n","import { Widget } from '@lumino/widgets';\nfunction poll(fn, wait = 1000, interval = 100) {\n    return new Promise((resolve, reject) => {\n        if (fn()) {\n            resolve();\n        }\n        else {\n            const id = setInterval(() => {\n                if (fn()) {\n                    clearInterval(id);\n                    resolve();\n                }\n                wait -= interval;\n                if (wait <= 0) {\n                    clearInterval(id);\n                    reject(new Error('timeout'));\n                }\n            }, interval);\n        }\n    });\n}\n/**\n * The MIME types for BokehJS.\n */\nconst HTML_MIME_TYPE = 'text/html';\nconst JS_MIME_TYPE = 'application/javascript';\nexport const BOKEHJS_LOAD_MIME_TYPE = 'application/vnd.bokehjs_load.v0+json';\nexport const BOKEHJS_EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';\n/**\n * Load BokehJS and CSS into the DOM\n */\nexport class BokehJSLoad extends Widget {\n    constructor(_options) {\n        super();\n        this._load_mimetype = BOKEHJS_LOAD_MIME_TYPE;\n        this._script_element = document.createElement('script');\n    }\n    renderModel(model) {\n        const data = model.data[this._load_mimetype];\n        this._script_element.textContent = data;\n        this.node.appendChild(this._script_element);\n        return Promise.resolve();\n    }\n}\n/**\n * Exec BokehJS in window\n */\nexport class BokehJSExec extends Widget {\n    constructor(_options, manager) {\n        super();\n        // for classic nb compat reasons, the payload in contained in these mime messages\n        this._html_mimetype = HTML_MIME_TYPE;\n        this._js_mimetype = JS_MIME_TYPE;\n        // the metadata is stored here\n        this._exec_mimetype = BOKEHJS_EXEC_MIME_TYPE;\n        this._script_element = document.createElement('script');\n        this._manager = manager;\n    }\n    async renderModel(model) {\n        const metadata = model.metadata[this._exec_mimetype];\n        if (metadata.id !== undefined) {\n            // I'm a static document\n            const data = model.data[this._js_mimetype];\n            this._script_element.textContent = data;\n            await poll(() => typeof Bokeh !== 'undefined');\n            this._document_id = metadata.id;\n            const { _manager } = this;\n            const kernel_proxy = {\n                registerCommTarget(targetName, callback) {\n                    var _a;\n                    const kernel = (_a = _manager.context.sessionContext.session) === null || _a === void 0 ? void 0 : _a.kernel;\n                    if (kernel != null) {\n                        kernel.registerCommTarget(targetName, callback);\n                    }\n                }\n            };\n            Bokeh.embed.kernels[this._document_id] = kernel_proxy;\n            _manager.context.sessionContext.statusChanged.connect((_session, status) => {\n                if (status == 'restarting' || status === 'dead') {\n                    delete Bokeh.embed.kernels[this._document_id];\n                }\n            }, this);\n        }\n        else if (metadata.server_id !== undefined) {\n            // I'm a server document\n            this._server_id = metadata.server_id;\n            const data = model.data[this._html_mimetype];\n            const d = document.createElement('div');\n            d.innerHTML = data;\n            const script_attrs = d.children[0].attributes;\n            for (const i in script_attrs) {\n                this._script_element.setAttribute(script_attrs[i].name, script_attrs[i].value);\n            }\n            this._script_element.textContent = d.textContent;\n        }\n        this.node.appendChild(this._script_element);\n    }\n    dispose() {\n        var _a;\n        if (this.isDisposed) {\n            return;\n        }\n        super.dispose();\n        if (this._server_id) {\n            const content = {\n                code: `import bokeh.io.notebook as ion; ion.destroy_server(\"${this._server_id}\")`\n            };\n            const kernel = (_a = this._manager.context.sessionContext.session) === null || _a === void 0 ? void 0 : _a.kernel;\n            if (kernel != null) {\n                kernel.requestExecute(content, true);\n            }\n            this._server_id = null;\n        }\n        else if (this._document_id) {\n            if (Bokeh.embed.kernels !== undefined) {\n                delete Bokeh.embed.kernels[this._document_id];\n            }\n            this._document_id = null;\n        }\n        this._manager = null;\n    }\n}\n","import { DOMWidgetModel, DOMWidgetView } from '@jupyter-widgets/base';\n//import {Document, DocumentChangedEvent, ModelChangedEvent} from \"document\"\n//import {Receiver, Fragment} from \"protocol/receiver\"\n//import {keys, values} from \"core/util/object\"\nimport { name, version } from './metadata';\nfunction bk_require(name) {\n    return window.Bokeh.require(name);\n}\nconst { keys, values } = Object;\nconst version_range = `^${version}`;\nexport class BokehModel extends DOMWidgetModel {\n    defaults() {\n        return Object.assign(Object.assign({}, super.defaults()), { _model_name: 'BokehModel', _model_module: name, _model_module_version: version_range, _view_name: 'BokehView', _view_module: name, _view_module_version: version_range, combine_events: false, render_bundle: {} });\n    }\n}\nBokehModel.serializers = Object.assign({}, DOMWidgetModel.serializers);\nexport class BokehView extends DOMWidgetView {\n    constructor(options) {\n        super(options);\n        this._document = null;\n        this._blocked = false;\n        this._idle = true;\n        this._combine = true;\n        this._msgs = [];\n        const { Receiver } = bk_require('protocol/receiver');\n        this._receiver = new Receiver();\n        this.model.on('change:render_bundle', () => this.render());\n        if (window.Jupyter != null &&\n            window.Jupyter.notebook != null) {\n            // Handle classic Jupyter notebook\n            const events = window.require('base/js/events');\n            events.on('kernel_idle.Kernel', () => this._process_msg());\n        }\n        else if (this.model.widget_manager.context != null) {\n            // Handle JupyterLab and Voila\n            const context = this.model.widget_manager.context;\n            const statusChanged = context.session != null\n                ? context.session.kernel.statusChanged\n                : context.sessionContext.statusChanged;\n            if (statusChanged != null) {\n                statusChanged.connect((_, status) => {\n                    if (status === 'idle') {\n                        this._process_msg();\n                    }\n                });\n            }\n            else if (this.model.get('combine_events')) {\n                console.warn('BokehView cannot combine events because Kernel idle status cannot be determined.');\n                this._combine = false;\n            }\n        }\n        else if (this.model.get('combine_events')) {\n            console.warn('BokehView cannot combine events because Kernel idle status cannot be determined.');\n            this._combine = false;\n        }\n        this.listenTo(this.model, 'msg:custom', (content, buffers) => this._consume_patch(content, buffers));\n    }\n    _process_msg() {\n        if (this._msgs.length == 0) {\n            this._idle = true;\n            return;\n        }\n        this.send(this._msgs.shift());\n    }\n    render() {\n        const bundle = JSON.parse(this.model.get('render_bundle'));\n        const { docs_json, render_items, div } = bundle;\n        this.el.innerHTML = div;\n        const element = this.el.children[0];\n        const json = values(docs_json)[0];\n        const { Document } = bk_require('document');\n        const { add_document_standalone } = bk_require('embed/standalone');\n        this._document = Document.from_json(json);\n        for (const item of render_items) {\n            const roots = {};\n            for (const root_id in item.roots) {\n                roots[root_id] = element;\n            }\n            add_document_standalone(this._document, element, roots);\n        }\n        this._document.on_change((event) => this._change_event(event));\n    }\n    _combine_events(new_msg) {\n        const new_msgs = [];\n        for (const msg of this._msgs) {\n            if (new_msg.kind != msg.kind) {\n                new_msgs.push(msg);\n            }\n            else if (msg.kind == 'ModelChanged' && new_msg.kind == 'ModelChanged') {\n                if (msg.id != new_msg.id || msg.attr != new_msg.attr) {\n                    new_msgs.push(msg);\n                }\n            }\n            else if (msg.kind == 'MessageSent' && new_msg.kind == 'MessageSent') {\n                if (msg.msg_data.event_values.model == null ||\n                    msg.msg_data.event_values.model.id !=\n                        new_msg.msg_data.event_values.model.id ||\n                    msg.msg_data.event_name != new_msg.msg_data.event_name) {\n                    new_msgs.push(msg);\n                }\n            }\n        }\n        new_msgs.push(new_msg);\n        return new_msgs;\n    }\n    _send(msg) {\n        if (!this._idle && this._combine && this.model.get('combine_events')) {\n            // Queue event and drop previous events on same model attribute\n            this._msgs = this._combine_events(msg);\n        }\n        else {\n            this._idle = false;\n            this.send(msg);\n        }\n    }\n    _change_event(event) {\n        if (this._blocked) {\n            return;\n        }\n        const { ModelChangedEvent, MessageSentEvent } = bk_require('document/events');\n        if (event instanceof ModelChangedEvent) {\n            const js_msg = {\n                event: 'jsevent',\n                kind: 'ModelChanged',\n                id: event.model.id,\n                attr: event.attr,\n                new: event.new_,\n                old: event.old,\n                hint: null\n            };\n            if (event.hint != null) {\n                if (event.hint.patches != null) {\n                    js_msg['hint'] = {\n                        column_source: event.hint.column_source,\n                        patches: event.hint.patches\n                    };\n                }\n                else if (event.hint.data != null) {\n                    js_msg['hint'] = {\n                        column_source: event.hint.column_source,\n                        data: event.hint.data,\n                        rollover: event.hint.rollover\n                    };\n                }\n            }\n            this._send(js_msg);\n        }\n        else if (event instanceof MessageSentEvent &&\n            event.msg_type == 'bokeh_event') {\n            const msg_data = Object.assign({}, event.msg_data);\n            const event_values = Object.assign({}, msg_data.event_values);\n            if (event_values.model != null) {\n                event_values['model'] = { id: event_values.model.id };\n            }\n            msg_data['event_values'] = event_values;\n            const js_msg = {\n                event: 'jsevent',\n                kind: 'MessageSent',\n                msg_type: event.msg_type,\n                msg_data: msg_data\n            };\n            this._send(js_msg);\n        }\n    }\n    _consume_patch(content, buffers) {\n        if (this._document == null) {\n            return;\n        }\n        if (content.msg == 'patch') {\n            const { payload } = content;\n            this._receiver.consume(payload != null ? payload : buffers[0].buffer);\n            const comm_msg = this._receiver.message;\n            if (comm_msg != null && keys(comm_msg.content).length > 0) {\n                this._blocked = true;\n                try {\n                    this._document.apply_json_patch(comm_msg.content, comm_msg.buffers);\n                }\n                finally {\n                    this._blocked = false;\n                }\n            }\n        }\n    }\n}\n","import { IJupyterWidgetRegistry } from '@jupyter-widgets/base';\nimport { DisposableDelegate } from '@lumino/disposable';\nimport { ContextManager } from './manager';\nimport { BokehJSExec, BokehJSLoad, BOKEHJS_EXEC_MIME_TYPE, BOKEHJS_LOAD_MIME_TYPE } from './renderer';\nexport class NBWidgetExtension {\n    createNew(nb, context) {\n        const manager = new ContextManager(context);\n        nb.content.rendermime.addFactory({\n            safe: false,\n            mimeTypes: [BOKEHJS_LOAD_MIME_TYPE],\n            createRenderer: options => new BokehJSLoad(options)\n        }, 0);\n        // the rank has to be -1, so that the priority is higher than the\n        // default javascript mime extension (rank=0)\n        nb.content.rendermime.addFactory({\n            safe: false,\n            mimeTypes: [BOKEHJS_EXEC_MIME_TYPE],\n            createRenderer: options => new BokehJSExec(options, manager)\n        }, -1);\n        return new DisposableDelegate(() => {\n            if (nb.content.rendermime) {\n                nb.content.rendermime.removeMimeType(BOKEHJS_EXEC_MIME_TYPE);\n            }\n            manager.dispose();\n        });\n    }\n}\nimport { name, version } from './metadata';\nimport { BokehModel, BokehView } from './widgets';\nexport const extension = {\n    id: name,\n    requires: [IJupyterWidgetRegistry],\n    activate: (app, widgets) => {\n        // this adds the Bokeh widget extension onto Notebooks specifically\n        app.docRegistry.addWidgetExtension('Notebook', new NBWidgetExtension());\n        widgets.registerWidget({\n            name,\n            version,\n            exports: {\n                BokehModel: BokehModel,\n                BokehView: BokehView\n            }\n        });\n    },\n    autoStart: true\n};\n","import { extension } from './plugin';\nexport default extension;\nexport * from './widgets';\n","Object.assign(exports, {\"name\":\"@bokeh/jupyter_bokeh\",\"version\":\"3.0.4\"})"],"names":["ContextManager","constructor","context","this","_context","Error","isDisposed","dispose","BOKEHJS_LOAD_MIME_TYPE","BOKEHJS_EXEC_MIME_TYPE","BokehJSLoad","Widget","_options","super","_load_mimetype","_script_element","document","createElement","renderModel","model","data","textContent","node","appendChild","Promise","resolve","BokehJSExec","manager","_html_mimetype","_js_mimetype","_exec_mimetype","_manager","async","metadata","undefined","id","fn","wait","interval","reject","setInterval","clearInterval","poll","Bokeh","_document_id","kernel_proxy","registerCommTarget","targetName","callback","_a","kernel","sessionContext","session","embed","kernels","statusChanged","connect","_session","status","server_id","_server_id","d","innerHTML","script_attrs","children","attributes","i","setAttribute","name","value","content","code","requestExecute","bk_require","window","require","keys","values","Object","version_range","version","BokehModel","DOMWidgetModel","defaults","assign","_model_name","_model_module","_model_module_version","_view_name","_view_module","_view_module_version","combine_events","render_bundle","serializers","BokehView","DOMWidgetView","options","_document","_blocked","_idle","_combine","_msgs","Receiver","_receiver","on","render","Jupyter","notebook","_process_msg","widget_manager","_","get","console","warn","listenTo","buffers","_consume_patch","length","send","shift","bundle","JSON","parse","docs_json","render_items","div","el","element","json","Document","add_document_standalone","from_json","item","roots","root_id","on_change","event","_change_event","_combine_events","new_msg","new_msgs","msg","kind","push","attr","msg_data","event_values","event_name","_send","ModelChangedEvent","MessageSentEvent","js_msg","new","new_","old","hint","patches","column_source","rollover","msg_type","payload","consume","buffer","comm_msg","message","apply_json_patch","NBWidgetExtension","createNew","nb","rendermime","addFactory","safe","mimeTypes","createRenderer","DisposableDelegate","removeMimeType","requires","IJupyterWidgetRegistry","activate","app","widgets","docRegistry","addWidgetExtension","registerWidget","exports","autoStart"],"sourceRoot":""}